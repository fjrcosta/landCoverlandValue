<!DOCTYPE html>
<html>
<head>
    
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css"/>
    
            <meta name="viewport" content="width=device-width,
                initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
            <style>
                #map_a1caa0c25b16d4ba2a659ff673af9c24 {
                    position: relative;
                    width: 100.0%;
                    height: 100.0%;
                    left: 0.0%;
                    top: 0.0%;
                }
                .leaflet-container { font-size: 1rem; }
            </style>

            <style>html, body {
                width: 100%;
                height: 100%;
                margin: 0;
                padding: 0;
            }
            </style>

            <style>#map {
                position:absolute;
                top:0;
                bottom:0;
                right:0;
                left:0;
                }
            </style>

            <script>
                L_NO_TOUCH = false;
                L_DISABLE_3D = false;
            </script>

        
    <script src="https://cdn.jsdelivr.net/npm/leaflet.fullscreen@3.0.0/Control.FullScreen.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet.fullscreen@3.0.0/Control.FullScreen.css"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.2/leaflet.draw.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.2/leaflet.draw.css"/>
    <script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css"/>
</head>
<body>
    
    
            <div class="folium-map" id="map_a1caa0c25b16d4ba2a659ff673af9c24" ></div>
        
    
            
        

    <div id="legend-box" style="position: fixed; 
                bottom: 50px; left: 50px; 
                width: 350px;
                background-color: white; 
                z-index: 9999; 
                border: 2px solid #333; 
                border-radius: 5px; 
                padding: 15px;
                box-shadow: 0 0 15px rgba(0,0,0,0.2);">
        <p style="margin: 0 0 10px 0; font-weight: bold; font-size: 13px; line-height: 1.5; color: #333;">
            Median urban vacant parcels unit values<br>
            predicted for: 2021-07-01 (R$/m²)
        </p>
        <div style="background: linear-gradient(to right, #fff7ec, #fff7eb, #fff6ea, #fff6e9, #fff5e7, #fff5e6, #fff4e5, #fff4e4, #fff3e3, #fff3e2, #fff2e1, #fff2e0, #fff1de, #fff1dd, #fff0dc, #fff0db, #feefda, #feefd9, #feefd8, #feeed7, #feeed5, #feedd4, #feedd3, #feecd2, #feecd1, #feebd0, #feebcf, #feeace, #feeacc, #fee9cb, #fee9ca, #fee8c9, #fee8c8, #fee7c7, #fee7c5, #fee6c4, #fee5c3, #fee5c1, #fee4c0, #fee4bf, #fee3bd, #fee2bc, #fee2bb, #fee1b9, #fee0b8, #fee0b7, #fedfb5, #fedfb4, #fddeb3, #fdddb1, #fdddb0, #fddcaf, #fddbad, #fddbac, #fddaab, #fdd9aa, #fdd9a8, #fdd8a7, #fdd8a6, #fdd7a4, #fdd6a3, #fdd6a2, #fdd5a0, #fdd49f, #fdd49e, #fdd39d, #fdd29c, #fdd19b, #fdd19b, #fdd09a, #fdcf99, #fdce98, #fdce97, #fdcd96, #fdcc96, #fdcb95, #fdca94, #fdca93, #fdc992, #fdc892, #fdc791, #fdc690, #fdc68f, #fdc58e, #fdc48d, #fdc38d, #fdc38c, #fdc28b, #fdc18a, #fdc089, #fdbf89, #fdbf88, #fdbe87, #fdbd86, #fdbc85, #fdbb85, #fdba83, #fdb982, #fdb881, #fdb67f, #fdb57e, #fdb37d, #fdb27b, #fdb07a, #fdaf79, #fdad77, #fdac76, #fdab75, #fda973, #fda872, #fda671, #fda56f, #fca36e, #fca26d, #fca06b, #fc9f6a, #fc9e69, #fc9c67, #fc9b66, #fc9964, #fc9863, #fc9662, #fc9560, #fc935f, #fc925e, #fc915c, #fc8f5b, #fc8e5a, #fc8c59, #fb8b58, #fb8a58, #fb8957, #fa8757, #fa8656, #f98556, #f98455, #f98254, #f88154, #f88053, #f77f53, #f77d52, #f67c52, #f67b51, #f67a51, #f57850, #f57750, #f4764f, #f4754f, #f4734e, #f3724e, #f3714d, #f2704c, #f26e4c, #f26d4b, #f16c4b, #f16a4a, #f0694a, #f06849, #f06749, #ef6548, #ef6447, #ee6246, #ed6145, #ec5f43, #ec5d42, #eb5c41, #ea5a3f, #e9583e, #e9573d, #e8553c, #e7533a, #e65239, #e55038, #e54e36, #e44d35, #e34b34, #e24933, #e24831, #e14630, #e0442f, #df432d, #df412c, #de3f2b, #dd3e2a, #dc3c28, #dc3a27, #db3926, #da3724, #d93523, #d93422, #d83221, #d7301f, #d62f1e, #d52d1d, #d42c1c, #d32a1b, #d2291a, #d12719, #cf2618, #ce2417, #cd2316, #cc2116, #cb2015, #ca1e14, #c91d13, #c71b12, #c61a11, #c51810, #c4170f, #c3150e, #c2140d, #c1120c, #c0110b, #be0f0a, #bd0e09, #bc0c08, #bb0b07, #ba0906, #b90805, #b80604, #b70503, #b50302, #b40201, #b30000, #b20000, #b00000, #ae0000, #ad0000, #ab0000, #a90000, #a80000, #a60000, #a50000, #a30000, #a10000, #a00000, #9e0000, #9c0000, #9b0000, #990000, #970000, #960000, #940000, #930000, #910000, #8f0000, #8e0000, #8c0000, #8a0000, #890000, #870000, #860000, #840000, #820000, #810000, #7f0000); 
                    height: 25px; 
                    width: 100%; 
                    border: 1px solid #666;
                    border-radius: 3px;"></div>
        <div style="display: flex; 
                    justify-content: space-between; 
                    margin-top: 8px; 
                    font-size: 11px;
                    color: #333;">
            <span>36.60</span>
            <span>3776.16</span>
        </div>

        <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid #ccc;">
            <label for="opacity-slider" style="font-weight: bold; font-size: 12px; color: #333; display: block; margin-bottom: 5px;">
                Layer Opacity: <span id="opacity-value">100</span>%
            </label>
            <input type="range" id="opacity-slider" min="0" max="100" value="100" 
                   style="width: 100%; height: 20px; cursor: pointer;">
        </div>
    </div>

    <script>
    window.addEventListener('load', function() {
        console.log('Opacity control loaded');

        const slider = document.getElementById('opacity-slider');
        const valueDisplay = document.getElementById('opacity-value');

        if (slider && valueDisplay) {
            slider.addEventListener('input', function() {
                const opacity = this.value / 100;
                valueDisplay.textContent = this.value;

                console.log('Setting opacity to:', opacity);

                // Método 1: Tentar pegar pela classe leaflet-tile-pane
                const tileLayers = document.querySelectorAll('.leaflet-tile-pane');
                tileLayers.forEach(function(pane) {
                    // Pegar apenas as camadas filhas
                    const children = pane.children;
                    for (let i = 0; i < children.length; i++) {
                        // Verificar se é uma camada overlay (não basemap)
                        if (children[i].style.zIndex > 200) {
                            children[i].style.opacity = opacity;
                            console.log('Applied opacity to tile pane child');
                        }
                    }
                });

                // Método 2: Pegar pelo overlay-pane
                const overlayPanes = document.querySelectorAll('.leaflet-overlay-pane');
                overlayPanes.forEach(function(pane) {
                    pane.style.opacity = opacity;
                    console.log('Applied opacity to overlay pane');
                });

                // Método 3: Pegar diretamente as imagens do Earth Engine
                const allImages = document.querySelectorAll('img');
                allImages.forEach(function(img) {
                    if (img.src.includes('earthengine.googleapis.com')) {
                        img.style.opacity = opacity;
                        console.log('Applied opacity to EE image');
                    }
                });
            });
        } else {
            console.error('Slider or value display not found');
        }
    });
    </script>
    </body>
<script>
    
    
            var map_a1caa0c25b16d4ba2a659ff673af9c24 = L.map(
                "map_a1caa0c25b16d4ba2a659ff673af9c24",
                {
                    center: [20.0, 0.0],
                    crs: L.CRS.EPSG3857,
                    ...{
  "zoom": 2,
  "zoomControl": true,
  "preferCanvas": false,
  "eeInitialize": true,
  "addGoogleMap": false,
  "pluginLatlngpopup": false,
  "pluginFullscreen": true,
  "pluginDraw": true,
  "DrawExport": false,
  "pluginMinimap": false,
  "locateControl": false,
  "searchControl": true,
  "basemap": "OpenStreetMap",
  "layersControl": true,
}

                }
            );

            

        
    
            var tile_layer_14c085b0871bb33319244ee88e94fc00 = L.tileLayer(
                "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
                {
  "minZoom": 0,
  "maxZoom": 30,
  "maxNativeZoom": 30,
  "noWrap": false,
  "attribution": "OpenStreetMap",
  "subdomains": "abc",
  "detectRetina": false,
  "tms": false,
  "opacity": 1,
}

            );
        
    
            tile_layer_14c085b0871bb33319244ee88e94fc00.addTo(map_a1caa0c25b16d4ba2a659ff673af9c24);
        
    
            L.control.fullscreen(
                {
  "position": "topleft",
  "title": "Full Screen",
  "titleCancel": "Exit Full Screen",
  "forceSeparateButton": false,
}
            ).addTo(map_a1caa0c25b16d4ba2a659ff673af9c24);
        
    
            var options = {
              position: "topleft",
              draw: {},
              edit: {},
            }
                // FeatureGroup is to store editable layers.
                var drawnItems_draw_control_a8d0fa37a264e63c9e7e6807fcf7051b =
                    new L.featureGroup().addTo(
                        map_a1caa0c25b16d4ba2a659ff673af9c24
                    );

            options.edit.featureGroup = drawnItems_draw_control_a8d0fa37a264e63c9e7e6807fcf7051b;
            var draw_control_a8d0fa37a264e63c9e7e6807fcf7051b = new L.Control.Draw(
                options
            ).addTo( map_a1caa0c25b16d4ba2a659ff673af9c24 );
            map_a1caa0c25b16d4ba2a659ff673af9c24.on(L.Draw.Event.CREATED, function(e) {
                var layer = e.layer,
                    type = e.layerType;
                var coords = JSON.stringify(layer.toGeoJSON());
                layer.on('click', function() {
                    alert(coords);
                    console.log(coords);
                });
                drawnItems_draw_control_a8d0fa37a264e63c9e7e6807fcf7051b.addLayer(layer);
            });
            map_a1caa0c25b16d4ba2a659ff673af9c24.on('draw:created', function(e) {
                drawnItems_draw_control_a8d0fa37a264e63c9e7e6807fcf7051b.addLayer(e.layer);
            });

            
        
    

            var geocoderOpts_geocoder_f18c33d28e8c62e1f2ed6dae1658510d = {
  "collapsed": true,
  "position": "topleft",
  "defaultMarkGeocode": true,
  "zoom": 11,
  "provider": "nominatim",
  "providerOptions": {
},
};

            // note: geocoder name should start with lowercase
            var geocoderName_geocoder_f18c33d28e8c62e1f2ed6dae1658510d = geocoderOpts_geocoder_f18c33d28e8c62e1f2ed6dae1658510d["provider"];

            var customGeocoder_geocoder_f18c33d28e8c62e1f2ed6dae1658510d = L.Control.Geocoder[ geocoderName_geocoder_f18c33d28e8c62e1f2ed6dae1658510d ](
                geocoderOpts_geocoder_f18c33d28e8c62e1f2ed6dae1658510d['providerOptions']
            );
            geocoderOpts_geocoder_f18c33d28e8c62e1f2ed6dae1658510d["geocoder"] = customGeocoder_geocoder_f18c33d28e8c62e1f2ed6dae1658510d;

            L.Control.geocoder(
                geocoderOpts_geocoder_f18c33d28e8c62e1f2ed6dae1658510d
            ).on('markgeocode', function(e) {
                var zoom = geocoderOpts_geocoder_f18c33d28e8c62e1f2ed6dae1658510d['zoom'] || map_a1caa0c25b16d4ba2a659ff673af9c24.getZoom();
                map_a1caa0c25b16d4ba2a659ff673af9c24.setView(e.geocode.center, zoom);
            }).addTo(map_a1caa0c25b16d4ba2a659ff673af9c24);

        
    
            map_a1caa0c25b16d4ba2a659ff673af9c24.fitBounds(
                [[20, 0], [20, 0]],
                {"maxZoom": 2}
            );
        
    
            map_a1caa0c25b16d4ba2a659ff673af9c24.fitBounds(
                [[-23.3197, -51.1662], [-23.3197, -51.1662]],
                {"maxZoom": 12}
            );
        
    
            var tile_layer_032c62090db8b2cf42edf9c78b9f569d = L.tileLayer(
                "https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",
                {
  "minZoom": 0,
  "maxZoom": 18,
  "maxNativeZoom": 18,
  "noWrap": false,
  "attribution": "Esri",
  "subdomains": "abc",
  "detectRetina": false,
  "tms": false,
  "opacity": 1,
}

            );
        
    
            tile_layer_032c62090db8b2cf42edf9c78b9f569d.addTo(map_a1caa0c25b16d4ba2a659ff673af9c24);
        
    
            var tile_layer_4ee44486e8f1dc51d9ee3df80383b2f2 = L.tileLayer(
                "https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",
                {
  "minZoom": 0,
  "maxZoom": 18,
  "maxNativeZoom": 18,
  "noWrap": false,
  "attribution": "Esri",
  "subdomains": "abc",
  "detectRetina": false,
  "tms": false,
  "opacity": 1,
}

            );
        
    
            var tile_layer_7a5e9e33504768644e0facd9a0c945d0 = L.tileLayer(
                "https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",
                {
  "minZoom": 0,
  "maxZoom": 18,
  "maxNativeZoom": 18,
  "noWrap": false,
  "attribution": "Esri",
  "subdomains": "abc",
  "detectRetina": false,
  "tms": false,
  "opacity": 1,
}

            );
        
    
            var tile_layer_74ef9ae6634e3992f4e36b21874867a7 = L.tileLayer(
                "https://earthengine.googleapis.com/v1/projects/170120204947/maps/d46c7419f82fd13a84c683cc932b342e-39c3ee1bdd6a196428967e17e82f3892/tiles/{z}/{x}/{y}",
                {
  "minZoom": 0,
  "maxZoom": 24,
  "maxNativeZoom": 24,
  "noWrap": false,
  "attribution": "Google Earth Engine",
  "subdomains": "abc",
  "detectRetina": false,
  "tms": false,
  "opacity": 1.0,
}

            );
        
    
            tile_layer_74ef9ae6634e3992f4e36b21874867a7.addTo(map_a1caa0c25b16d4ba2a659ff673af9c24);
        
    
            var layer_control_b788c67f7bc5d6213ec7c12a7124a1c1_layers = {
                base_layers : {
                    "Esri WorldImagery" : tile_layer_032c62090db8b2cf42edf9c78b9f569d,
                    "Esri WorldStreetMap" : tile_layer_4ee44486e8f1dc51d9ee3df80383b2f2,
                    "Esri WorldTopoMap" : tile_layer_7a5e9e33504768644e0facd9a0c945d0,
                },
                overlays :  {
                    "OpenStreetMap" : tile_layer_14c085b0871bb33319244ee88e94fc00,
                    "2021-07-01" : tile_layer_74ef9ae6634e3992f4e36b21874867a7,
                },
            };
            let layer_control_b788c67f7bc5d6213ec7c12a7124a1c1 = L.control.layers(
                layer_control_b788c67f7bc5d6213ec7c12a7124a1c1_layers.base_layers,
                layer_control_b788c67f7bc5d6213ec7c12a7124a1c1_layers.overlays,
                {
  "position": "topright",
  "collapsed": false,
  "autoZIndex": true,
}
            ).addTo(map_a1caa0c25b16d4ba2a659ff673af9c24);

        
</script>
</html>